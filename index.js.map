{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '48901919-31fb8722d9302fb6f0fb2505f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      message: `Error: ${error.message}`,\n      position: 'topRight',\n      iconUrl:\n        'https://raw.githubusercontent.com/denis-cactus/goit-js-hw-12/refs/heads/gh-pages/error.svg',\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nexport const renderImages = images => {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<a class=\"gallery-item\" href=\"${largeImageURL}\">\n        <div class=\"image-card\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          <div class=\"image-info\">\n            <ul class=\"list\">\n                <li class=\"list_item\">\n                <h3 class=\"item_title\">Likes</h3>\n                <p class=\"item_text\">${likes}</p></li>\n                <li class=\"list_item\">\n                <h3 class=\"item_title\">Views</h3>\n                <p class=\"item_text\">${views}</p></li>\n                <li class=\"list_item\">\n                <h3 class=\"item_title\">Comments</h3>\n                <p class=\"item_text\">${comments}</p></li>\n                <li class=\"list_item\">\n                <h3 class=\"item_title\">Downloads</h3>\n                <p class=\"item_text\">${downloads}</p></li>\n            </ul>\n          </div>\n        </div>\n      </a>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n  gallery.innerHTML = '';\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst perPage = 15;\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\nlet loadMoreBtn = null;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = searchInput.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      message: 'Please enter a search term!',\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      messageColor: '#fafafb',\n      iconUrl:\n        'https://raw.githubusercontent.com/denis-cactus/goit-js-hw-12/refs/heads/gh-pages/error.svg',\n    });\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  totalHits = 0;\n  if (loadMoreBtn) {\n    loadMoreBtn.remove();\n    loadMoreBtn = null;\n  }\n\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    if (data.hits.length === 0) {\n      loader.style.display = 'none';\n      iziToast.info({\n        message: \"We're sorry, but no images match your search.\",\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        iconUrl:\n          'https://raw.githubusercontent.com/denis-cactus/goit-js-hw-12/refs/heads/gh-pages/error.svg',\n      });\n      return;\n    }\n\n    totalHits = data.totalHits;\n    renderImages(data.hits);\n\n    loader.style.display = 'none';\n\n    if (totalHits > page * perPage) {\n      createLoadMoreButton();\n    }\n    lighbox.refresh();\n  } catch (error) {\n    loader.style.display = 'none';\n  }\n});\n\nfunction createLoadMoreButton() {\n  loadMoreBtn = document.createElement('button');\n  loadMoreBtn.textContent = 'Load more';\n  loadMoreBtn.classList.add('load-more-btn');\n\n  gallery.insertAdjacentElement('afterend', loadMoreBtn);\n\n  loadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n\n    loader.style.display = 'block';\n\n    try {\n      const data = await fetchImages(query, page, perPage);\n\n      renderImages(data.hits);\n\n      loader.style.display = 'none';\n      scrollPage();\n\n      if (page * perPage >= totalHits) {\n        loadMoreBtn.remove();\n        loadMoreBtn = null;\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          backgroundColor: '#ef4040',\n          messageColor: '#fafafb',\n          iconUrl:\n            'https://raw.githubusercontent.com/denis-cactus/goit-js-hw-12/refs/heads/gh-pages/error.svg',\n        });\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong!',\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n      });\n    }\n  });\n}\n\nfunction scrollPage() {\n  const card = document.querySelector('.image-card');\n  if (!card) return;\n\n  const cardHeight = card.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","iziToast","gallery","lightbox","SimpleLightbox","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","searchForm","searchInput","loader","totalHits","loadMoreBtn","event","data","createLoadMoreButton","scrollPage","card","cardHeight"],"mappings":"owBAIA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAMC,EAAU,GAAI,CAC3D,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,GAEe,IACjB,OAAQE,EAAO,CACdC,EAAS,MAAM,CACb,QAAS,UAAUD,EAAM,OAAO,GAChC,SAAU,WACV,QACE,4FACR,CAAK,CACF,CACH,CC5BA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,YAAY,EACnCC,EAAeC,GAAU,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC,iCAAiCL,CAAa;AAAA;AAAA,sBAEhCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uCAKTC,CAAK;AAAA;AAAA;AAAA,uCAGLC,CAAK;AAAA;AAAA;AAAA,uCAGLC,CAAQ;AAAA;AAAA;AAAA,uCAGRC,CAAS;AAAA;AAAA;AAAA;AAAA,WAK3C,EACA,KAAK,EAAE,EACVZ,EAAQ,mBAAmB,YAAaK,CAAM,EAE9CJ,EAAS,QAAO,CAClB,EAEaY,EAAe,IAAM,CAChCb,EAAQ,UAAY,EACtB,ECzCMc,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDf,EAAU,SAAS,cAAc,UAAU,EAC3CgB,EAAS,SAAS,cAAc,SAAS,EAEzCpB,EAAU,GAChB,IAAID,EAAO,EACPD,EAAQ,GACRuB,EAAY,EACZC,EAAc,KAElBJ,EAAW,iBAAiB,SAAU,MAAMK,GAAS,CAInD,GAHAA,EAAM,eAAc,EACpBzB,EAAQqB,EAAY,MAAM,OAEtB,CAACrB,EAAO,CACVK,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,QACE,4FACR,CAAK,EACD,MACD,CAEDc,IACAlB,EAAO,EACPsB,EAAY,EACRC,IACFA,EAAY,OAAM,EAClBA,EAAc,MAGhBF,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMI,EAAO,MAAM3B,EAAYC,EAAOC,EAAMC,CAAO,EACnD,GAAIwB,EAAK,KAAK,SAAW,EAAG,CAC1BJ,EAAO,MAAM,QAAU,OACvBjB,EAAS,KAAK,CACZ,QAAS,gDACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,QACE,4FACV,CAAO,EACD,MACD,CAEDkB,EAAYG,EAAK,UACjBjB,EAAaiB,EAAK,IAAI,EAEtBJ,EAAO,MAAM,QAAU,OAEnBC,EAAYtB,EAAOC,GACrByB,IAEF,QAAQ,QAAO,CAChB,MAAe,CACdL,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EAED,SAASK,GAAuB,CAC9BH,EAAc,SAAS,cAAc,QAAQ,EAC7CA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,eAAe,EAEzClB,EAAQ,sBAAsB,WAAYkB,CAAW,EAErDA,EAAY,iBAAiB,QAAS,SAAY,CAChDvB,GAAQ,EAERqB,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMI,EAAO,MAAM3B,EAAYC,EAAOC,EAAMC,CAAO,EAEnDO,EAAaiB,EAAK,IAAI,EAEtBJ,EAAO,MAAM,QAAU,OACvBM,IAEI3B,EAAOC,GAAWqB,IACpBC,EAAY,OAAM,EAClBA,EAAc,KACdnB,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,QACE,4FACZ,CAAS,EAEJ,MAAe,CACdiB,EAAO,MAAM,QAAU,OACvBjB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACT,SAAU,WACV,gBAAiB,UACjB,aAAc,SACtB,CAAO,CACF,CACL,CAAG,CACH,CAEA,SAASuB,GAAa,CACpB,MAAMC,EAAO,SAAS,cAAc,aAAa,EACjD,GAAI,CAACA,EAAM,OAEX,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}